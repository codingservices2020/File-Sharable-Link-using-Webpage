<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=1024">
  <title>Your File is Ready!</title>
  <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>
  <div class="container">
    <div class="header">
      <div class="logo">
        <h1>Upload & Share File</h1>
      </div>
      <div class="clear"></div>
    </div>

    <div class="menu">
      <a href="{{ url_for('index') }}" class="headerlink">Upload</a>&nbsp; | &nbsp;
      <a href="#" class="headerlink">Register</a>&nbsp; | &nbsp;
      <a href="#" class="headerlink">FAQ</a>&nbsp; | &nbsp;
      <a href="#" class="headerlink">Report files</a>&nbsp; | &nbsp;
      <a href="#" class="headerlink">Feedback</a>&nbsp; | &nbsp;
      <a href="{{ url_for('rules') }}" class="headerlink">Rules</a>
    </div>

    <div class="upload-container">
      <div class="success-icon">
        <i class="fas fa-check-circle"></i>
      </div>
      <h1>File Uploaded Successfully!</h1>
      <p>Share this link with anyone you want to access your file:</p>

      <div class="share-link-box">
        <a href="{{ short_link }}" class="share-link" target="_blank" id="shareLink">{{ short_link }}</a>
      </div>

      <div class="action-buttons">
        <button class="action-button" onclick="window.open('{{ short_link }}', '_blank')">
          <i class="fas fa-external-link-alt"></i> Open File
        </button>
        <button class="action-button btn-secondary" onclick="window.location.href='/'">
          <i class="fas fa-upload"></i> Upload Another
        </button>
        <button class="action-button" onclick="copyToClipboard()">
          <i class="fas fa-copy"></i> Copy Link
        </button>
      </div>

      <div class="file-info">
        <span class="smalltxt">Powered by Coding Services â€¢ Link expires in 30 days</span>
      </div>
    </div>

    <div class="footer">
      <div style="padding-left:280px">
        <table cellpadding="0" cellspacing="0" border="0">
          <tr>
            <td valign="middle" class="lightblue bold">NB! We are not responsible for files uploaded here!</td>
          </tr>
        </table>
      </div>
    </div>
  </div>

  <script>
    // Get the short link from URL parameters
    const urlParams = new URLSearchParams(window.location.search);
    const shortLink = urlParams.get('link');

    function copyToClipboard() {
      const el = document.createElement('textarea');
      el.value = shortLink;
      document.body.appendChild(el);
      el.select();
      document.execCommand('copy');
      document.body.removeChild(el);

      alert('Link copied to clipboard!');
    }

    // Update the share link
    document.getElementById('shareLink').href = shortLink;
    document.getElementById('shareLink').textContent = shortLink;
  </script>
</body>
</html>

